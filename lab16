import matplotlib.pyplot as plt
import pandas as pd

# Load the student data from CSV
df = pd.read_csv('student.csv')

# Calculate average scores for each subject
avgsrs = {}
for i in range(1, len(df.columns), 2):
    code = df.columns[i][:5]
    avg_score = (df.iloc[:, i].mean() + df.iloc[:, i + 1].mean()) / 2
    avgsrs[code] = avg_score

# Find the subject code with the highest average
highest_avg_subject = max(avgsrs, key=avgsrs.get)
highest_avg_score = avgsrs[highest_avg_subject]

print("Subject code with highest average =", highest_avg_subject)
print("Highest average score =", highest_avg_score)

# Calculate average CIE and SEE scores for each student
avg_cie = df.iloc[:, 1::2].mean(axis=1)
avg_see = df.iloc[:, 2::2].mean(axis=1)

# Prepare data for plotting
x = range(len(df.index))
w = 0.4

# Plot the bar chart
plt.bar(x, avg_cie, width=w, color='r', label="CIE")
plt.bar([i + w for i in x], avg_see, width=w, color='g', label="SEE")
plt.xticks([i + w/2 for i in x], df['USN'], rotation=45)
plt.legend()
plt.title("Student Performance: Avg CIE vs Avg SEE")
plt.xlabel("Student USN's")
plt.ylabel("CIE vs SEE Score")
plt.tight_layout()
plt.show()
